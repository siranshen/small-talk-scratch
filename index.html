<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Small Talk</title>
  <link href="styles.css" rel="stylesheet" type="text/css">
</head>

<body>
  <div class="all-container">
    <div id="nav-overlay" class="overlay fade"></div>
    <section id="nav-container" class="nav-container slide">
      <nav>
        <button class="nav-toggle-button">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-arrow-bar-left">
            <path d="M4 12l10 0"></path>
            <path d="M4 12l4 4"></path>
            <path d="M4 12l4 -4"></path>
            <path d="M20 4l0 16"></path>
          </svg>
        </button>
        <div class="nav-div-name">
          <div class="nav-div-logo">
            <svg viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg">
              <path d="M23,26a1,1,0,0,1-1,1H8c-.22,0-.43.2-.61.33L4,30V14a1,1,0,0,1,1-1H8.86V11H5a3,3,0,0,0-3,3V32a1,1,0,0,0,.56.89,1,1,0,0,0,1-.1L8.71,29H22.15A2.77,2.77,0,0,0,25,26.13V25H23Z" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
              <path d="M31,4H14a3,3,0,0,0-3,3V19a3,3,0,0,0,3,3H27.55l4.78,3.71a1,1,0,0,0,1,.11,1,1,0,0,0,.57-.9V7A3,3,0,0,0,31,4ZM32,22.94,28.5,20.21a1,1,0,0,0-.61-.21H14a1,1,0,0,1-1-1V7a1,1,0,0,1,1-1H31A1.1,1.1,0,0,1,32,7.06Z" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </div>
          SmallTalk
        </div>
        <div class="nav-div">Welcome to SmallTalk (TBD 😅)! This is where you get to practice your foreign or second language skills with an AI.</div>
        <div class="nav-div">Please enter your API settings below to get started.</div>
        <div class="nav-div">
          <div class="nav-div-heading">OpenAI</div>
          <div class="nav-div-labeled-input">
            <label for="openai-key">API Key</label>
            <input type="password" id="openai-key" name="openai-key" placeholder="sk-xxxxxxx">
          </div>
          <div class="nav-div-labeled-input">
            <label for="openai-model">Model</label>
            <input type="text" id="openai-model" name="openai-model" placeholder="gpt-3.5-turbo-0613">
          </div>
        </div>
        <div class="nav-div">
          <div class="nav-div-heading">Azure Speech</div>
          <div class="nav-div-labeled-input">
            <label for="azure-key">API Key</label>
            <input type="password" id="azure-key" name="azure-key" placeholder="xxxxxxxxxx">
          </div>
          <div class="nav-div-labeled-input">
            <label for="azure-region">Region</label>
            <input type="text" id="azure-region" name="azure-region" placeholder="eastasia">
          </div>
        </div>
        <div class="nav-div">
          <div class="nav-div-button">
            <button class="solid-button">Save Locally</button>
          </div>
        </div>
      </nav>
    </section>

    <section class="main-container">
      <header>
        <button class="nav-toggle-button">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-arrow-bar-right">
            <path d="M20 12l-10 0"></path>
            <path d="M20 12l-4 4"></path>
            <path d="M20 12l-4 -4"></path>
            <path d="M4 4l0 16"></path>
          </svg>
        </button>
        <div id="chat-title">Practicing free talk</div>
      </header>
      <main>
        <div class="chat-container">
          <div class="chat-area">
            <div class="chat-line chat-line-ai">
              <div class="message-container">messages</div>
            </div>
            <div class="chat-line chat-line-user">
              <div class="message-container">messages</div>
            </div>
            <div class="chat-line chat-line-ai">
              <div class="message-container">中文消息 中文消息 中文消息 中文消息 中文消息 中文消息 中文消息 中文消息 中文消息 中文消息 中文消息 中文消息</div>
            </div>
            <div class="chat-line chat-line-user">
              <div class="message-container">messages messages messages
              </div>
            </div>
            <div class="chat-line chat-line-ai">
              <div class="message-container">
                <button class="audio-play-btn flex-none">
                  <svg fill="#333" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M5.92 24.096q0 1.088 0.928 1.728 0.512 0.288 1.088 0.288 0.448 0 0.896-0.224l16.16-8.064q0.48-0.256 0.8-0.736t0.288-1.088-0.288-1.056-0.8-0.736l-16.16-8.064q-0.448-0.224-0.896-0.224-0.544 0-1.088 0.288-0.928 0.608-0.928 1.728v16.16z"></path></svg>
                </button>
                <canvas height="48" width="400" class="audio-canvas audio-ai"></canvas>
              </div>
              <div class="message-container">messages messages messages messages messages messages messages
              </div>
            </div>
            <div class="chat-line chat-line-user">
              <div class="message-container">
                <button class="audio-play-btn flex-none">
                  <svg fill="#fff" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M5.92 24.096q0 1.088 0.928 1.728 0.512 0.288 1.088 0.288 0.448 0 0.896-0.224l16.16-8.064q0.48-0.256 0.8-0.736t0.288-1.088-0.288-1.056-0.8-0.736l-16.16-8.064q-0.448-0.224-0.896-0.224-0.544 0-1.088 0.288-0.928 0.608-0.928 1.728v16.16z"></path></svg>
                </button>
                <canvas height="48" width="400" class="audio-canvas audio-user"></canvas>
              </div>
              <div class="message-container">messages messages messages messages messages messages messages
              </div>
            </div>
            <div class="chat-filler"></div>
          </div>
        </div>
        <div class="user-input-container">
          <div class="user-input-area">
            <textarea id="user-input-text" rows="1" placeholder="Type your message..."></textarea>
            <div id="user-input-button-container">
              <button id="mic-btn" class="solid-button">
                <svg viewBox="2 2 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 17V21M12 21H9M12 21H15" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                  <rect x="10" y="3" width="4" height="10" rx="2" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="#fff"></rect>
                  <path d="M17.7378 12.7542C17.3674 13.9659 16.6228 15.0293 15.6109 15.7918C14.599 16.5544 13.3716 16.977 12.1047 16.9991C10.8378 17.0212 9.59647 16.6417 8.55854 15.9149C7.52061 15.1881 6.73941 14.1515 6.32689 12.9534" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
              </button>
              <button id="options-btn" class="solid-button">
                <svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect x="17" y="2" width="6" height="36" rx="3" fill="#fff"></rect>
                  <rect x="2" y="17" width="36" height="6" ry="3" fill="#fff"></rect>
                </svg>
              </button>
              <div id="options-tooltip" class="hidden">
                <button><span><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 7C6.44772 7 6 7.44772 6 8C6 8.55228 6.44772 9 7 9H13C13.5523 9 14 8.55228 14 8C14 7.44772 13.5523 7 13 7H7Z" fill="currentColor"></path> <path d="M6 12C6 11.4477 6.44772 11 7 11H13C13.5523 11 14 11.4477 14 12C14 12.5523 13.5523 13 13 13H7C6.44772 13 6 12.5523 6 12Z" fill="currentColor"></path> <path d="M7 15C6.44772 15 6 15.4477 6 16C6 16.5523 6.44772 17 7 17H13C13.5523 17 14 16.5523 14 16C14 15.4477 13.5523 15 13 15H7Z" fill="#000000"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M5.625 3H7.03369C7.71014 2.37135 8.6473 2 9.62497 2H18.375C20.263 2 22 3.38491 22 5.33333V14.6667C22 16.6151 20.263 18 18.375 18H17.94C17.631 19.697 16.1637 21 14.375 21H5.625C3.60818 21 2 19.3435 2 17.3333V6.66667C2 4.65653 3.60818 3 5.625 3ZM18.375 16H18V6.66667C18 5.62093 17.5648 4.67089 16.8632 4H18.375C19.3864 4 20 4.70443 20 5.33333V14.6667C20 15.2956 19.3864 16 18.375 16ZM5.625 5C4.74233 5 4 5.73129 4 6.66667V17.3333C4 18.2687 4.74233 19 5.625 19H14.375C15.2577 19 16 18.2687 16 17.3333V6.66667C16 5.73129 15.2577 5 14.375 5H5.625Z" fill="currentColor"></path></svg></span>Show text</button>
                <button><span><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg></span>Clear talk</button>
              </div>
            </div>
          </div>
        </div>
      </main>
    </section>
  </div>

  <script>
    const userInputTextArea = document.getElementById("user-input-text");
    userInputTextArea.oninput = () => {
      this.style.height = "1px";
      this.style.height = (this.scrollHeight) + "px";
    };
    
    const optionsBtn = document.getElementById("options-btn");
    const optionsTooltip = document.getElementById("options-tooltip");
    optionsBtn.onclick = () => {
      optionsBtn.classList.toggle("open");
      optionsTooltip.classList.toggle("hidden");
    };

    const sideNav = document.getElementById("nav-container");
    const navOverlay = document.getElementById("nav-overlay");
    const navToggleBtns = [...document.getElementsByClassName("nav-toggle-button")]
    
    navOverlay.onclick = toggleNav;
    navToggleBtns.forEach(btn => btn.onclick = toggleNav);

    function toggleNav() {
      sideNav.classList.toggle("slided");
      navOverlay.classList.toggle("faded");
    }
    
    const canvases = [...document.getElementsByTagName("canvas")];
    canvases.forEach(canvas => {
      let isAi = false;
      if (canvas.className.includes("audio-ai")) {
        isAi = true;
      }
      const ctx = canvas.getContext("2d");
      ctx.lineCap = "round";
      ctx.lineWidth = 6;
      ctx.strokeStyle = isAi ? "rgba(51,51,51,1)" : "rgba(255,255,255,1)";
      
      let x = 10;
      for (; x < 180; x += 10) {
        const dot = new Path2D();
        dot.moveTo(x, 24);
        dot.lineTo(x, 24);
        ctx.stroke(dot);
      }
      for (let i = 1; x < 200; x += 10, i++) {
        const bar = new Path2D();
        bar.moveTo(x, 24 - 5 * i);
        bar.lineTo(x, 24 + 5 * i);
        ctx.stroke(bar);
      }
      ctx.strokeStyle = isAi ? "rgba(51,51,51,0.6)" : "rgba(255,255,255,0.6)";
      for (let i = 2; x < 230; x += 10, i--) {
        const bar = new Path2D();
        bar.moveTo(x, 24 - 5 * i);
        bar.lineTo(x, 24 + 5 * i);
        ctx.stroke(bar);
      }
      for (; x < 390; x += 10) {
        const bar = new Path2D();
        bar.moveTo(x, 24);
        bar.lineTo(x, 24);
        ctx.stroke(bar);
      }
    })
  </script>
</body>

</html>